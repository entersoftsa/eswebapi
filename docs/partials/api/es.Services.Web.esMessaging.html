<a href="https://github.com/entersoftsa/eswebapi/edit/master/src/js/esinit.js" class="improve-docs"><i class="icon-edit"> </i>Improve this doc</a><a href="https://github.com/entersoftsa/eswebapi/blob/cfea9a0/src/js/esinit.js#L210" class="view-source"><i class="icon-eye-open"> </i>View source</a><h1><code ng:non-bindable="">esMessaging</code>
<div><span class="hint">service in module <code ng:non-bindable="">es.Services.Web</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="es-services-web-esmessaging-page"><p>esMessaging is a factory service that provides all the primitive functions for a publisher-subscribers messaging event system that its is not based 
on the AngularJS events or watch pattern but in pure callaback function pattern.</p>
</div></div>
<div class="member method"><h2 id="methods">Methods</h2>
<ul class="methods"><li><a href="https://github.com/entersoftsa/eswebapi/blob/cfea9a0/src/js/esinit.js#L278" class="view-source icon-eye-open"> </a><h3 id="methods_publish">publish(args)</h3>
<div class="publish"><div class="es-services-web-esmessaging-publish-page"><p>This function is used to raise - publish that an event-topic has occurred. As a consequence, all the subscribed to
this topic-event subsciption callback functions will be triggered and executed sequentially.</p>
</div><h5 id="methods_publish_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>args</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="es-services-web-esmessaging-publish-page"><p>One or more arguments, with the first being the string for the topic-event that occurred. The rest of the arguments
if any will be supplied to the callback functions that will be fired. These extra arguments are considered to be specific to the nature 
of the topic-event.</p>
</div></td></tr></tbody></table><h4 id="methods_publish_example">Example</h4>
<div class="example"><div class="es-services-web-esmessaging-publish-page"><p>esMessaging is also used by the Entersoft AngularJS API in order to implement the login, logout, session expired, etc. logical events
that need to be handled and properly managed in any application based on the API. </p>
<p>This call is used by the API to publish an event that occured. The topic-event is the &quot;AUTH_CHANGED&quot; and it is this event-topic that any interested in 
party should subscribe to in order to be notified whenever this event occurs. The rest arguments, i.e. esClientSession and getAuthToken(model) are the
parameters that will be supplied to the callback functions that have been registered to this topic-event.</p>
<pre><code class="lang-js">esMessaging.publish(&quot;AUTH_CHANGED&quot;, esClientSession, getAuthToken(model));
</code></pre>
</div></div>
</div>
</li>
<li><a href="https://github.com/entersoftsa/eswebapi/blob/cfea9a0/src/js/esinit.js#L311" class="view-source icon-eye-open"> </a><h3 id="methods_subscribe">subscribe(topic, callback)</h3>
<div class="subscribe"><div class="es-services-web-esmessaging-subscribe-page"><p>This function is used to subscribe to a specific event-topic and register a callback function to be called (i.e. fired)
once the event-topic is being raised - published.</p>
</div><h5 id="methods_subscribe_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>topic</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="es-services-web-esmessaging-subscribe-page"><p>the event name to which this function will subscribe to the callback</p>
</div></td></tr><tr><td>callback</td><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="es-services-web-esmessaging-subscribe-page"><p>the callback function that will be fired once this event-topic is being <strong>raised - published</strong></p>
</div></td></tr></tbody></table><h5 id="methods_subscribe_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="es-services-web-esmessaging-subscribe-page"><p>An object representic the handle to this specific subscription instance.
If you need to unsubscribe from this event-topic then you need to store the returned handle value, otherwise you do not need to keep the result</p>
</div></td></tr></table><h4 id="methods_subscribe_example">Example</h4>
<div class="example"><div class="es-services-web-esmessaging-subscribe-page"><p>In a controller, typically the root controller of an ng-app, we need to register for the &quot;AUTH_CHANGED&quot; topic event in order to properly configure and
handle the logic of our application depending on the current login / authentication state with the Entersoft Application Server. For this, we need to
use the subscribe function as in the example below:</p>
<pre><code class="lang-js">smeControllers.controller(&#39;mainCtrl&#39;, [&#39;$location&#39;, &#39;$scope&#39;, &#39;$log&#39;, &#39;esMessaging&#39;, &#39;esWebApi&#39;, &#39;esGlobals&#39;,
    function($location, $scope, $log, esMessaging, esWebApiService, esGlobals) {

        // ... other things

        esMessaging.subscribe(&quot;AUTH_CHANGED&quot;, function(sess, apitoken) {
            $scope.esnotify.error(s);
        });
    }
]);
</code></pre>
</div></div>
</div>
</li>
<li><a href="https://github.com/entersoftsa/eswebapi/blob/cfea9a0/src/js/esinit.js#L322" class="view-source icon-eye-open"> </a><h3 id="methods_unsubscribe">unsubscribe(handle)</h3>
<div class="unsubscribe"><div class="es-services-web-esmessaging-unsubscribe-page"><p>This function is used to unsubscribe from an event-topic to which there was a subscription with the subscribe function</p>
</div><h5 id="methods_unsubscribe_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>handle</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="es-services-web-esmessaging-unsubscribe-page"><p>The handle that the subscribe function returned as a result when we first did the subscription.</p>
</div></td></tr></tbody></table></div>
</li>
</ul>
</div>
</div>
