<a href="https://github.com/entersoftsa/eswebapi/edit/master/src/js/esinit.js" class="improve-docs"><i class="icon-edit"> </i>Improve this doc</a><a href="https://github.com/entersoftsa/eswebapi/blob/'git' i/src/js/esinit.js#L404" class="view-source"><i class="icon-eye-open"> </i>View source</a><h1><code ng:non-bindable="">esGlobals</code>
<div><span class="hint">service in module <code ng:non-bindable="">es.Services.Web</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="es-services-web-esglobals-page"><p>esGlobals is a factory service that provides functions, constructs and messaging events for common <em>global</em> nature in the context of a typical
AngularJS SPA based on Entersoft AngularJS API.</p>
</div></div>
<h2 id="dependencies">Dependencies</h2>
<ul class="dependencies"><li><code ng:non-bindable=""><a href="#/api/ng.$sessionStorage">$sessionStorage</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/ng.$log">$log</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/ng.$injector">$injector</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/es.Services.Web.esMessaging">esMessaging</a></code>
</li>
</ul>
<div class="member method"><h2 id="methods">Methods</h2>
<ul class="methods"><li><a href="https://github.com/entersoftsa/eswebapi/blob/'git' i/src/js/esinit.js#L1565" class="view-source icon-eye-open"> </a><h3 id="methods_esmultizoomdef">ESMultiZoomDef(ZoomID, PQOptions, UseCache)</h3>
<div class="esmultizoomdef"><div class="es-services-web-esglobals-esmultizoomdef-page"><p>Constructs an ESPublicQueryDef object that will be used to specify the execution of a PublicQuery in a call to multiPublicQuery</p>
</div><h5 id="methods_esmultizoomdef_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>ZoomID</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="es-services-web-esglobals-esmultizoomdef-page"><p>The ID of the ES Zoom to be retrieved i.e. &quot;<strong>ESGOZCountry</strong>&quot;</p>
</div></td></tr><tr><td>PQOptions</td><td><a href="" class="label type-hint type-hint-espqoptions">ESPQOptions</a></td><td><div class="es-services-web-esglobals-esmultizoomdef-page"><p>The server side paging options to be used for the Zoom retrieval. See <a href="#/api/es.Services.Web.esGlobals#methods_espqoptions">ESPQOptions</a>.</p>
</div></td></tr><tr><td>UseCache</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="es-services-web-esglobals-esmultizoomdef-page"><p>A boolean value indicating whether the contents of this specific Zoom will be retrieved and stored in the ESWebAPI client-side memory cache.</p>
</div></td></tr></tbody></table></div>
</li>
<li><a href="https://github.com/entersoftsa/eswebapi/blob/'git' i/src/js/esinit.js#L1579" class="view-source icon-eye-open"> </a><h3 id="methods_espqoptions">ESPQOptions(Page, PageSize, WithCount)</h3>
<div class="espqoptions"><div class="es-services-web-esglobals-espqoptions-page"><p>Constructs an ESPQOptions object that specifies the server side paging options of a Public Query execution</p>
</div><h5 id="methods_espqoptions_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>Page</td><td><a href="" class="label type-hint type-hint-number">number</a></td><td><div class="es-services-web-esglobals-espqoptions-page"><p>The Server Side Page Number (<strong>1-based</strong>) to be retrieved. Valid is considered any value represeting a number &gt;= 1</p>
</div></td></tr><tr><td>PageSize</td><td><a href="" class="label type-hint type-hint-number">number</a></td><td><div class="es-services-web-esglobals-espqoptions-page"><p>The Server Side size of page (&gt; =1) to be retrieved from the server.</p>
</div></td></tr><tr><td>WithCount</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="es-services-web-esglobals-espqoptions-page"><p>If true, the result of the execution will also have the total number of records that exist for this execution run of the PQ</p>
</div></td></tr></tbody></table></div>
</li>
<li><a href="https://github.com/entersoftsa/eswebapi/blob/'git' i/src/js/esinit.js#L1026" class="view-source icon-eye-open"> </a><h3 id="methods_esparamvalues">ESParamValues(vals)</h3>
<div class="esparamvalues"><div class="es-services-web-esglobals-esparamvalues-page"><p>Constructs an ESParamValues object to be used in es-params-panel directive or public query execution</p>
</div><h5 id="methods_esparamvalues_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>vals <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="es-services-web-esglobals-esparamvalues-page"><p>a JSON object with key-value properties representing the params</p>
</div></td></tr></tbody></table><h5 id="methods_esparamvalues_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-esparamvalues">ESParamValues</a></td><td><div class="es-services-web-esglobals-esparamvalues-page"><p>Returns a new instance of the ESParamValue class.</p>
</div></td></tr></table><h4 id="methods_esparamvalues_example">Example</h4>
<div class="example"><div class="es-services-web-esglobals-esparamvalues-page"><pre><code class="lang-js">var esVals = new esGlobals.ESParamValues({pCode: &#39;Hello World&#39;});
var esVals2 = new esGlobals.ESParamValues();
</code></pre>
</div></div>
</div>
</li>
<li><a href="https://github.com/entersoftsa/eswebapi/blob/'git' i/src/js/esinit.js#L1048" class="view-source icon-eye-open"> </a><h3 id="methods_esparamvaluesmerge">ESParamValues.merge(val)</h3>
<div class="esparamvaluesmerge"><div class="es-services-web-esglobals-esparamvalues-merge-page"><p>Merges into the current instance of the ESParamValues object the values provided by the val parameter</p>
</div><h5 id="methods_esparamvaluesmerge_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>val</td><td><a href="" class="label type-hint type-hint-esparamvalues">ESParamValues</a><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="es-services-web-esglobals-esparamvalues-merge-page"><p>an object that is either of type ESParamValues or a simple JSON object with key-value pairs
with the constraint that the value should be of type <a href="#/api/es.Services.Web.esGlobals#methods_esparamval">ESParamVal</a>.</p>
</div></td></tr></tbody></table><h4 id="methods_esparamvaluesmerge_example">Example</h4>
<div class="example"><div class="es-services-web-esglobals-esparamvalues-merge-page"><pre><code class="lang-js">var pA = new esGlobals.ESParamValues({p1: &#39;Hello&#39;, p2: 5});
var pB = new esGlobals.ESParamValues({p3: &#39;Hello&#39;});
pA.merge(pB);
$log.info(JSON.stringify(pA));
// will result into p1, p2, p3
</code></pre>
</div></div>
</div>
</li>
<li><a href="https://github.com/entersoftsa/eswebapi/blob/'git' i/src/js/esinit.js#L1091" class="view-source icon-eye-open"> </a><h3 id="methods_esparamvaluessetparamvalues">ESParamValues.setParamValues(vals)</h3>
<div class="esparamvaluessetparamvalues"><div class="es-services-web-esglobals-esparamvalues-setparamvalues-page"><p>Assigns or merges into the current instance of ESParamValues the given vals. If the current instance
already holds parameter values then their values will be replaced by the vals property values if they exists or unmodified
if the they do not exists in the vals object</p>
</div><h5 id="methods_esparamvaluessetparamvalues_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>vals <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="es-services-web-esglobals-esparamvalues-setparamvalues-page"><p>a JSON object with key-value properties representing the params</p>
</div></td></tr></tbody></table><h4 id="methods_esparamvaluessetparamvalues_example">Example</h4>
<div class="example"><div class="es-services-web-esglobals-esparamvalues-setparamvalues-page"><pre><code class="lang-js">var x = new esGlobals.ESParamValues();
x.setParamValues({p1: &#39;Hello World&#39;});
</code></pre>
</div></div>
</div>
</li>
<li><a href="https://github.com/entersoftsa/eswebapi/blob/'git' i/src/js/esinit.js#L1551" class="view-source icon-eye-open"> </a><h3 id="methods_espublicquerydef">ESPublicQueryDef(CtxID, GroupID, FilterID, The, Params)</h3>
<div class="espublicquerydef"><div class="es-services-web-esglobals-espublicquerydef-page"><p>Constructs an ESPublicQueryDef object that will be used to specify the execution of a PublicQuery in a call to multiPublicQuery</p>
</div><h5 id="methods_espublicquerydef_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>CtxID</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="es-services-web-esglobals-espublicquerydef-page"><p>A unique identifier for this PQ execution call (unique in the context of the array of ESPublicQueryDef that will be used in the execution of multiPublicQuery)</p>
</div></td></tr><tr><td>GroupID</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="es-services-web-esglobals-espublicquerydef-page"><p>The GroupID of the Public Query</p>
</div></td></tr><tr><td>FilterID</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="es-services-web-esglobals-espublicquerydef-page"><p>The FilterID of the Public Query</p>
</div></td></tr><tr><td>The</td><td><a href="" class="label type-hint type-hint-espqoptions">ESPQOptions</a></td><td><div class="es-services-web-esglobals-espublicquerydef-page"><p>paging options for the Public Query Execution. See <a href="#/api/es.Services.Web.esGlobals#methods_espqoptions">ESPQOptions</a>.</p>
</div></td></tr><tr><td>Params</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="es-services-web-esglobals-espublicquerydef-page"><p>The params to be used for the execution of the Public Query</p>
</div></td></tr></tbody></table></div>
</li>
<li><a href="https://github.com/entersoftsa/eswebapi/blob/'git' i/src/js/esinit.js#L1372" class="view-source icon-eye-open"> </a><h3 id="methods_esconvertgidtoid">esConvertGIDtoId(gid)</h3>
<div class="esconvertgidtoid"><div class="es-services-web-esglobals-esconvertgidtoid-page"><p>Converts a string value represeting a GID to a string value that can act as a value for the name attribute in html elements.
This is a useful function that can be used to convert a gid to an id that can be assigned as an HTML element name i.e. in a form field declartion.</p>
</div><h5 id="methods_esconvertgidtoid_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>gid</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="es-services-web-esglobals-esconvertgidtoid-page"><p>the gid in string value representation to be converted</p>
</div></td></tr></tbody></table><h5 id="methods_esconvertgidtoid_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="es-services-web-esglobals-esconvertgidtoid-page"><p>the converted value to string that is of the form &quot;gid&quot; + gid as string BUT with the - char replaced to _.
If the parameter is null or undefined then the static string &quot;gid&quot; is returned.</p>
</div></td></tr></table><h4 id="methods_esconvertgidtoid_example">Example</h4>
<div class="example"><div class="es-services-web-esglobals-esconvertgidtoid-page"><pre><code class="lang-html">&lt;input 
    class=&quot;es-survey-question-control es-param-control&quot; 
    kendo-date-time-picker
        name=&quot;{{esGlobals.esConvertGIDtoId(esQuestion.GID)}}&quot; 
        ng-required=&quot;esQuestion.Mandatory&quot; 
        ng-model=&quot;esPsVal[esQuestion.Code]&quot; 
/&gt;
</code></pre>
</div></div>
</div>
</li>
<li><a href="https://github.com/entersoftsa/eswebapi/blob/'git' i/src/js/esinit.js#L1386" class="view-source icon-eye-open"> </a><h3 id="methods_esconvertidtogid">esConvertIDtoGID(id)</h3>
<div class="esconvertidtogid"><div class="es-services-web-esglobals-esconvertidtogid-page"><p>Converts a string value represeting a GID to a string value that can act as a value for the name attribute in html elements.
This is a useful function that can be used to convert a gid to an id that can be assigned as an HTML element name i.e. in a form field declartion.</p>
</div><h5 id="methods_esconvertidtogid_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>id</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="es-services-web-esglobals-esconvertidtogid-page"><p>the string value representation of a gid (as a result of the <a href="#/api/es.Services.Web.esGlobals#methods_esconvertgidtoid">esConvertGIDtoId function call</a>) to be converted back to a gid string</p>
</div></td></tr></tbody></table><h5 id="methods_esconvertidtogid_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="es-services-web-esglobals-esconvertidtogid-page"><p>the original gid value in string representation.
If the parameter is null or undefined then the static string &quot;gid&quot; is returned.</p>
</div></td></tr></table></div>
</li>
<li><a href="https://github.com/entersoftsa/eswebapi/blob/'git' i/src/js/esinit.js#L1472" class="view-source icon-eye-open"> </a><h3 id="methods_getextensionsformimetype">getExtensionsForMimeType(mimelist, mimeType)</h3>
<div class="getextensionsformimetype"><div class="es-services-web-esglobals-getextensionsformimetype-page"><p>Function that returns an array of extensions that match the given mimeType</p>
<p><strong>REQUIRES ESWebAPIServer &gt;= 1.7.9</strong></p>
</div><h5 id="methods_getextensionsformimetype_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>mimelist</td><td><a href="" class="label type-hint type-hint-object">object[]</a></td><td><div class="es-services-web-esglobals-getextensionsformimetype-page"><p>An array of objects of type {mime: string, extension: string, IsText: boolean} that holds a mime representation record.
For more information on how to get a list of supported mime types please read <a href="#/api/es.Services.Web.esWebApi#methods_getmimetypes">mimeTypes</a>.</p>
</div></td></tr><tr><td>mimeType</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="es-services-web-esglobals-getextensionsformimetype-page"><p>The mimeType string for which we want the string array of extensions that are mapped to this mimeType</p>
</div></td></tr></tbody></table><h5 id="methods_getextensionsformimetype_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string[]</a></td><td><div class="es-services-web-esglobals-getextensionsformimetype-page"><p>The array of strings that are mapped to this mimeType. If no map is found, an empty array i.e. [] will be returned</p>
</div></td></tr></table><h4 id="methods_getextensionsformimetype_example">Example</h4>
<div class="example"><div class="es-services-web-esglobals-getextensionsformimetype-page"><pre><code class="lang-js">var exts = esGlobals.getExtensionsForMimeType(mimelist, &quot;text/plain&quot;);
//exts will be [&quot;txt&quot;, &quot;text&quot;, &quot;conf&quot;, &quot;def&quot;, &quot;list&quot;, &quot;log&quot;, &quot;in&quot;]
</code></pre>
</div></div>
</div>
</li>
<li><a href="https://github.com/entersoftsa/eswebapi/blob/'git' i/src/js/esinit.js#L1432" class="view-source icon-eye-open"> </a><h3 id="methods_getmimetypeforext">getMimeTypeForExt(mimelist, filenamewithext)</h3>
<div class="getmimetypeforext"><div class="es-services-web-esglobals-getmimetypeforext-page"><p>Function that returns the mime-type for the given input filename or extension.</p>
<p><strong>REQUIRES ESWebAPIServer &gt;= 1.7.9</strong></p>
</div><h5 id="methods_getmimetypeforext_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>mimelist</td><td><a href="" class="label type-hint type-hint-object">object[]</a></td><td><div class="es-services-web-esglobals-getmimetypeforext-page"><p>An array of objects of type {mime: string, extension: string, IsText: boolean} that holds a mime representation record.
For more information on how to get a list of supported mime types please read <a href="#/api/es.Services.Web.esWebApi#methods_getmimetypes">mimeTypes</a>.</p>
</div></td></tr><tr><td>filenamewithext</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="es-services-web-esglobals-getmimetypeforext-page"><p>the fullpath or just the filename or just the extension for which we want to have the corresponding mime-type
i.e. &quot;/abc/xyz/masterfile.pdf&quot; or &quot;docx&quot; or &quot;.xlsx&quot;, etc.</p>
</div></td></tr></tbody></table><h5 id="methods_getmimetypeforext_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="es-services-web-esglobals-getmimetypeforext-page"><p>The mime-type string for the extension or filename provided in the <em>filenamewithext</em> param. If no mime-type is registered for
this extension the function returns an empty string &#39;&#39;.</p>
</div></td></tr></table><h4 id="methods_getmimetypeforext_example">Example</h4>
<div class="example"><div class="es-services-web-esglobals-getmimetypeforext-page"><pre><code class="lang-js">var mimeType = esGlobals.getMimeTypeForExt(mimelist, &quot;myfile.docx&quot;);
// mimeType will be &quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;
</code></pre>
</div></div>
</div>
</li>
<li><a href="https://github.com/entersoftsa/eswebapi/blob/'git' i/src/js/esinit.js#L1535" class="view-source icon-eye-open"> </a><h3 id="methods_getusermessage">getUserMessage(err, status)</h3>
<div class="getusermessage"><div class="es-services-web-esglobals-getusermessage-page"><p>This function is used to process the error obejct as well as the status code of any type of error in order to get the best match
for a user <strong>Error Message</strong> string to be presented to the user.</p>
</div><h5 id="methods_getusermessage_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>err</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="es-services-web-esglobals-getusermessage-page"><p>The error object we got from i.e. http or promise failure.</p>
</div></td></tr><tr><td>status <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-number">number</a></td><td><div class="es-services-web-esglobals-getusermessage-page"><p>The status int code we got from an http or promise failure</p>
</div></td></tr></tbody></table><h5 id="methods_getusermessage_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="es-services-web-esglobals-getusermessage-page"><p>A JSON object with the following type:</p>
<pre><code class="lang-js">{
    isLogin: boolean, // boolean value indicating whether the error is related to the login process
    messageToShow: string // The string message to be shown to the user
}
</code></pre>
</div></td></tr></table><h4 id="methods_getusermessage_example">Example</h4>
<div class="example"><div class="es-services-web-esglobals-getusermessage-page"><p>```js
smeControllers.controller(&#39;mainCtrl&#39;, [&#39;$location&#39;, &#39;$scope&#39;, &#39;$log&#39;, &#39;esMessaging&#39;, &#39;esWebApi&#39;, &#39;esGlobals&#39;,
    function($location, $scope, $log, esMessaging, esWebApiService, esGlobals) {</p>
<pre><code>    // other things to do

    esMessaging.subscribe(&quot;ES_HTTP_CORE_ERR&quot;, function(rejection, status) {
        var s = esGlobals.getUserMessage(rejection, status);
        $scope.esnotify.error(s.messageToShow);
    });
}
</code></pre><p>]);</p>
</div></div>
</div>
</li>
<li><a href="https://github.com/entersoftsa/eswebapi/blob/'git' i/src/js/esinit.js#L1405" class="view-source icon-eye-open"> </a><h3 id="methods_getversion">getVersion()</h3>
<div class="getversion"><div class="es-services-web-esglobals-getversion-page"><p>Function that returns the current version of the Entersoft AngularJS API.</p>
</div><h5 id="methods_getversion_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="es-services-web-esglobals-getversion-page"><p>A JSON object representing the current version of the Entersoft AngularJS API in sem-ver semantics</p>
<pre><code class="lang-js">var esAPIversion = {
    Major: int, // i.e. 1
    Minor: int, // i.e. 0
    Patch: int // i.e. 1
}
</code></pre>
</div></td></tr></table></div>
</li>
</ul>
</div>
</div>
