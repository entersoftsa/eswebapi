/*! Entersoft Application Server WEB API - v1.20.7 - 2017-06-23
* Copyright (c) 2017 Entersoft SA; Licensed Apache-2.0 */
!function(a){"use strict";function b(a,b,c){a.isReady=!1,b.subscribe("ES_HTTP_CORE_ERR",function(a,b){var d=c.getUserMessage(a,b);alert(d.messageToShow)}),c.getESUISettings().mobile=window.esDeviceMode,c.getESUISettings().defaultGridHeight=window.esGridHeight?window.esGridHeight.toString()+"px":"",c.getESUISettings().mobile&&window.esGridHeight&&window.esGridHeight>80&&(c.getESUISettings().defaultGridHeight=(window.esGridHeight-80).toString()+"px")}function c(b,c,d,e){return window.esWebApiToken?(b.ownLogin=!1,c.setWebApiToken(window.esWebApiToken),a.isFunction(e)&&e(),void(b.isReady=!0)):b.esCredentials.subscriptionPassword&&b.esCredentials.UserID&&b.esCredentials.Password&&b.esCredentials.BranchID?void b.authenticate():void(b.showLogin=!0)}var d=a.module("esWebPqApp",["ngStorage","ui.router","es.Services.Web","kendo.directives","underscore","es.Web.UI","ui.bootstrap","uiGmapgoogle-maps"]);d.config(["$logProvider","esWebApiProvider","uiGmapGoogleMapApiProvider","$translateProvider",function(a,b,c,d){var e=window.esWebApiSettings||{host:"eswebapi.entersoft.gr"};b.setSettings(e),d.useStaticFilesLoader({files:[{prefix:"languages/eswebapi-locale-",suffix:".json"}]}),d.preferredLanguage("el"),d.fallbackLanguage("en"),d.useSanitizeValueStrategy("escape"),c.configure({key:"AIzaSyDCds_w5v7aruDExi6j-mAldpyBi3IwQFk",libraries:"weather,geometry,visualization"})}]),d.controller("esComponentCtrl",["$scope","$log","$window","esMessaging","esWebApi","esUIHelper","esGlobals","uiGmapGoogleMapApi",function(d,e,f,g,h,i,j,k){d.esCredentials={},d.isReady=!1,d.showLogin=!1,d.ownLogin=!0,f.esWebApiSettings&&(d.esCredentials.subscriptionId=f.esWebApiSettings.subscriptionId||"",d.esCredentials.subscriptionPassword=f.esWebApiSettings.subscriptionPassword||"",d.esCredentials.UserID=f.esWebApiSettings.UserID||"",d.esCredentials.Password=f.esWebApiSettings.Password||"",d.esCredentials.bridgeId=f.esWebApiSettings.bridgeId||"",d.esCredentials.BranchID=f.esWebApiSettings.BranchID||"",d.esCredentials.LangID=f.esWebApiSettings.LangID||""),b(d,g,j);var l=f.navigator.language||f.navigator.userLanguage;d.esCredentials.LangID=d.esCredentials.LangID?d.esCredentials.LangID:j.suggestESLanguageID(l),d.authenticate=function(){h.openSession(d.esCredentials).then(function(a){d.showLogin=!1,window.esWebApiToken=j.getWebApiToken(),m(),d.isReady=!0},function(a){d.isReady=!1,d.showLogin=!0;j.getUserMessage(a)})};var m=function(){var b;a.isArray(window.esDef)?b=_.map(window.esDef,function(b){var c=(new j.ESPublicQueryDef).initFromObj(b.esDef);return c.ESUIType=b.ESUIType.toLowerCase(),b.esDef&&b.esDef.Params&&a.isArray(b.esDef.Params)&&(c.Params=new i.createESParams(b.esDef.Params)),c.AA=b.AA,c}):(b=(new j.ESPublicQueryDef).initFromObj(window.esDef),window.esDef&&window.esDef.Params&&a.isArray(window.esDef.Params)&&(b.Params=new i.createESParams(window.esDef.Params))),d.esPqDef=b};c(d,j,h,m)}])}(window.angular);