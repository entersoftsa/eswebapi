/*! Entersoft Application Server WEB API - v1.20.10 - 2017-08-01
* Copyright (c) 2017 Entersoft SA; Licensed Apache-2.0 */
!function(a){"use strict";function b(a,b,c){a.isReady=!1,b.subscribe("ES_HTTP_CORE_ERR",function(a,b){var d=c.getUserMessage(a,b);alert(d.messageToShow)}),c.getESUISettings().mobile=window.esDeviceMode,c.getESUISettings().defaultGridHeight=window.esGridHeight?window.esGridHeight.toString()+"px":"",c.getESUISettings().mobile&&window.esGridHeight&&window.esGridHeight>80&&(c.getESUISettings().defaultGridHeight=(window.esGridHeight-80).toString()+"px")}function c(b,c,d,e){return window.esWebApiToken?(b.ownLogin=!1,c.setWebApiToken(window.esWebApiToken),a.isFunction(e)&&e(),void(b.isReady=!0)):b.esCredentials.subscriptionPassword&&b.esCredentials.UserID&&b.esCredentials.Password&&b.esCredentials.BranchID?void b.authenticate():void(b.showLogin=!0)}var d=a.module("esWebPqApp",["ngStorage","ui.router","es.Services.Web","kendo.directives","underscore","es.Web.UI","ui.bootstrap"]);d.config(["$logProvider","esWebApiProvider","$translateProvider",function(a,b,c){var d=window.esWebApiSettings||{host:"eswebapi.entersoft.gr"};b.setSettings(d),c.useStaticFilesLoader({files:[{prefix:"languages/eswebapi-locale-",suffix:".json"}]}),c.preferredLanguage("el"),c.fallbackLanguage("en"),c.useSanitizeValueStrategy("escape")}]),d.controller("esComponentCtrl",["$scope","$log","$window","esMessaging","esWebApi","esUIHelper","esGlobals",function(d,e,f,g,h,i,j){d.esCredentials={},d.isReady=!1,d.showLogin=!1,d.ownLogin=!0,f.esWebApiSettings&&(d.esCredentials.subscriptionId=f.esWebApiSettings.subscriptionId||"",d.esCredentials.subscriptionPassword=f.esWebApiSettings.subscriptionPassword||"",d.esCredentials.UserID=f.esWebApiSettings.UserID||"",d.esCredentials.Password=f.esWebApiSettings.Password||"",d.esCredentials.bridgeId=f.esWebApiSettings.bridgeId||"",d.esCredentials.BranchID=f.esWebApiSettings.BranchID||"",d.esCredentials.LangID=f.esWebApiSettings.LangID||""),b(d,g,j);var k=f.navigator.language||f.navigator.userLanguage;d.esCredentials.LangID=d.esCredentials.LangID?d.esCredentials.LangID:j.suggestESLanguageID(k),d.authenticate=function(){h.openSession(d.esCredentials).then(function(a){d.showLogin=!1,window.esWebApiToken=j.getWebApiToken(),l(),d.isReady=!0},function(a){d.isReady=!1,d.showLogin=!0;j.getUserMessage(a)})};var l=function(){var b;a.isArray(window.esDef)?b=_.map(window.esDef,function(a){var b=(new j.ESPublicQueryDef).initFromObj(a.esDef);return b.ESUIType=a.ESUIType.toLowerCase(),a.esDef&&(b.Params=i.createESParams(a.esDef.Params)),b.AA=a.AA,b}):(b=(new j.ESPublicQueryDef).initFromObj(window.esDef),window.esDef&&(b.Params=i.createESParams(window.esDef.Params))),d.esPqDef=b};c(d,j,h,l)}])}(window.angular);