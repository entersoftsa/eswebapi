<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <title>Entersoft Mobile Public Query Viewer</title>

    <link rel="stylesheet" href="styles/eswebapi.min.css" />
    <link rel="stylesheet" href="styles/styles.min.css" />
   

</head>

<body ng-cloak>
    <div ng-cloak>
        <div ng-controller="esComponentCtrl">
            <div ng-if="showLogin">
                <es-login 
                    es-credentials="esCredentials" 
                    es-on-success="authenticate()" 
                    es-show-subscription="true" 
                    es-show-bridge="true"
                    es-show-sticky-session="0">
                </es-login>
            </div>
            <es-pivot-pq ng-if="isReady"
                es-pq-def="esPqDef" 
                es-panel-open="esPqDef.esPanelOpen">
            </es-pivot-pq>
        </div>
    </div>
    
    <!-- build:ESDEBUG -->
    <script type="text/javascript">
    function prepareMobileCall() {
        window.esWebApiSettings = {
            host: "192.168.1.190/entersoft.web.api",
            allowUnsecureConnection: true,
            subscriptionId: "",
            subscriptionPassword: "passx",
            UserID: "admin",
            Password: "entersoft",
            LangID: "en-GB",
            bridgeId: "",
            BranchID: "001"
        };
        window.esDeviceMode = "";
        window.esGridHeight = "";
        window.esWebApiToken = "";
        window.esDef = {
            GroupID: "ESTMOpportunity",
            FilterID: "ESTMOpportunityManagement",
            UIOptions: {
                    autoBind: false,
                    title: "Leads by Lead Source",
                    series: [{
                        type: 'column',
                        field: 'OppRevenue',
                        categoryField: 'fLeadSourceCode',
                        aggregate: 'sum',
                        axis: "Revenue"
                    }, {
                        type: 'line',
                        field: 'OppRevenue',
                        categoryField: 'fLeadSourceCode',
                        aggregate: 'count',
                        axis: "CountOf"
                    }],

                    valueAxes: [{
                        name: "Revenue",
                        title: {
                            text: "Turnover (euros)"
                        }
                    }, {
                        name: "CountOf",
                        title: {
                            text: "Count Of"
                        }
                    }],

                    categoryAxis: {
                        labels: {
                            rotation: 90
                        },
                        axisCrossingValues: [0, 205]
                    },


                    tooltip: {
                        visible: true,
                        template: "#= category #: #= value #"
                    },
                    pannable: {
                        lock: "x"
                    },
                    zoomable: {
                        mousewheel: {
                            lock: "x"
                        },
                        selection: {
                            lock: "x"
                        }
                    }
                }
        };
    };
    prepareMobileCall();
    </script>
    <!-- endbuild -->
    <script src="js/eswebapi.all.min.js"></script>
    <script src="js/app.min.js"></script>

</body>

</html>
