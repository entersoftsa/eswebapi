<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">

    <title>Entersoft Mobile Public Query Viewer</title>
    <link rel="stylesheet" href="styles/eswebapi.min.css" />
    <!-- build:css styles/app.min.css -->
    <link rel="stylesheet" href="app-red.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="kendo-styles.css">
    <!-- endbuild -->
</head>

<body ng-cloak class="extended">
    <div ng-controller="esComponentCtrl">
        <div ng-if="showLogin">
            <es-login es-credentials="esCredentials" es-on-success="authenticate()" es-show-subscription="true" es-show-bridge="true" es-show-sticky-session="0">
            </es-login>
        </div>
        <div ng-repeat="section in esPqDef" ng-init="outerIndex = $index" class="layout-row" layout-sm="column" layout-xs="column">
            <div ng-repeat="dbItem in section" class="mdl-cell shadow" flex="{{100 / (section.length || 2)}}" flex-sm="100" flex-xs="100" style="background: white;">
                <div id="anchor{{dbItem.CtxID}}" class="panel-body forms">
                    <div ng-if="::!isFavouritesMode" class="actions-r">
                        <button role="button" class="btn btn-transparent"><a ng-click="addRemoveFav(dbItem, true)" title="{{'FAV.ADD' | translate}}"><i class="mdi md-32 mdi-heart"></i></a></button>
                    </div>
                    <div ng-if="::isFavouritesMode" class="actions-r">
                        <button role="button" class="btn btn-transparent"><a ng-click="addRemoveFav(dbItem, false)" title="{{'FAV.DEL' | translate}}"><i class="mdi md-32 red mdi-heart-off"></i></a></button>
                        <button role="button" class="btn btn-transparent margin-r" ng-class="{'disabled': !canMoveUpOrDown(dbItem, true)}"><a ng-click="moveUpOrDown(dbItem, true)" title="{{'FAV.UP' | translate}}"><i class="mdi md-32 mdi-arrow-up-bold-circle"></i></a></button>
                        <button role="button" class="btn btn-transparent" ng-class="{'disabled': !canMoveUpOrDown(dbItem, false)}"><a ng-click="moveUpOrDown(dbItem, false)" title="{{'FAV.DOWN' | translate}}"><i class="mdi md-32 mdi-arrow-down-bold-circle"></i></a></button>
                    </div>
                    <es-web-pq ng-if="dbItem.ESUIType.toLowerCase() == 'esgrid'" es-group-id="dbItem.GroupID" es-p-q-options="dbItem.PQOptions" es-panel-open="dbItem.esPanelOpen" es-params-values="dbItem.Params" es-force-title="dbItem.Title" es-filter-id="dbItem.FilterID" es-grid-options="dbItem.UIOptions">
                    </es-web-pq>
                    <es-chart ng-if="dbItem.ESUIType.toLowerCase() == 'eschart'" es-pq-def="dbItem" es-panel-open="dbItem.esPanelOpen" es-chart-options="dbItem.UIOptions">
                    </es-chart>
                    <es-tree-map ng-if="dbItem.ESUIType.toLowerCase() == 'estreemap'" es-pq-def="dbItem" es-panel-open="dbItem.esPanelOpen" es-chart-options="dbItem.UIOptions">
                    </es-tree-map>
                    <es-pivot-pq ng-if="dbItem.ESUIType.toLowerCase() == 'espivot'" es-pq-def="dbItem" es-panel-open="dbItem.esPanelOpen">
                    </es-pivot-pq>
                    <es-map-pq ng-if="dbItem.ESUIType.toLowerCase() == 'esmap'" es-options="dbItem.UIOptions" es-pq-def="dbItem" es-panel-open="dbItem.esPanelOpen">
                    </es-map-pq>
                    <span id="anchor3"></span>
                </div>
            </div>
        </div>
    </div>
    <!-- build:ESDEBUG -->
    <script type="text/javascript">
    function prepareMobileCall() {
        window.esWebApiSettings = {
            host: "eswebapi.entersoft.gr",
            allowUnsecureConnection: false,
            subscriptionId: "rigdev",
            subscriptionPassword: "passx",
            UserID: "admin",
            Password: "entersoft",
            LangID: "en-GB",
            bridgeId: "",
            BranchID: "ΑΘΗ"
        };
        window.esDeviceMode = "";
        window.esGridHeight = "";
        window.esWebApiToken = "";
        window.esDef = {
            "AA": 30000,
            "ID": "PQ_30000",
            "GroupID": "SALES",
            "Title": {
                "en": "Leads",
                "el": "Leads",
                "ro": "Leads",
                "bg": "Евентуални сделки"
            },
            "Description": "Leads",
            "ESUIType": "esCombo",
            "esDef": [
                [{
                        "AA": 30100,
                        "ID": "PQ_30100",
                        "ESUIType": "esChart",
                        "esDef": {
                            "GroupID": "ESWebManager",
                            "FilterID": "SalesLeadStatusAnalysis",
                            "UIOptions": {
                                "theme": "silver",
                                "series": [{
                                    "type": "pie",
                                    "startAngle": 150,
                                    "field": "CountLeads",
                                    "categoryField": "Status",
                                    "axis": "CountLeads"
                                }],
                                "tooltip": {
                                    "visible": true,
                                    "template": "#= category #: #= value #"
                                },
                                "pannable": {
                                    "lock": "x"
                                },
                                "zoomable": {
                                    "mousewheel": {
                                        "lock": "x"
                                    },
                                    "selection": {
                                        "lock": "x"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "AA": 30101,
                        "ID": "PQ_30101",
                        "ESUIType": "esChart",
                        "esDef": {
                            "GroupID": "ESWebManager",
                            "FilterID": "SalesLeadRateAnalysis",
                            "UIOptions": {
                                "autoBind": true,
                                "theme": "silver",
                                "series": [{
                                    "type": "pie",
                                    "startAngle": 150,
                                    "field": "CountLeads",
                                    "categoryField": "Quality",
                                    "axis": "CountLeads"
                                }],
                                "tooltip": {
                                    "visible": true,
                                    "template": "#= category #: #= value #"
                                },
                                "pannable": {
                                    "lock": "x"
                                },
                                "zoomable": {
                                    "mousewheel": {
                                        "lock": "x"
                                    },
                                    "selection": {
                                        "lock": "x"
                                    }
                                }
                            }
                        }
                    }
                ],
                [{
                    "AA": 30102,
                    "ID": "PQ_30102",
                    "Title": "Leads ανά κατάσταση & ποιότητα",
                    "Description": "Leads ανά κατάσταση & ποιότητα",
                    "ESUIType": "esChart",
                    "esDef": {
                        "GroupID": "ESWebManager",
                        "FilterID": "LeadsByStatusQuality",
                        "Params": [{
                            "id": "JoinResource",
                            "value": ""
                        }],
                        "UIOptions": {
                            "autoBind": true,
                            "legend": {
                                "visible": true,
                                "position": "top",
                                "labels": {
                                    "template": "#= series.name #"
                                }
                            },
                            "group": [{
                                "field": "Quality"
                            }],
                            "seriesDefaults": {
                                "type": "bar",
                                "stack": {
                                    "type": "100%"
                                }
                            },
                            "series": [{
                                "field": "CountLeads",
                                "categoryField": "Status",
                                "axis": "CountLeads",
                                "title": "Status",
                                "color": "#f3ac32"
                            }],
                            "valueAxis": {
                                "visible": true,
                                "name": "CountLeads",
                                "title": {
                                    "text": {
                                        "en": "Number of leads",
                                        "el": "Πλήθος leads",
                                        "ro": "Numar de leaduri",
                                        "bg": "Брой Потенциални клиенти"
                                    }
                                }
                            },
                            "categoryAxis": {
                                "categories": "Status",
                                "labels": {
                                    "rotation": 0,
                                    "font": "8px"
                                }
                            },
                            "tooltip": {
                                "visible": true,
                                "template": " #= category #, #= series.name #<br/> #=  value #",
                                "text-align": "left"
                            }
                        }
                    }
                }]
            ]
        };
    };
    prepareMobileCall();
    window.angular.element(document).ready(function() {
        {
            window.angular.bootstrap(document, ['esWebPqApp']);
        }
    });
    </script>
    <!-- endbuild -->
    <script src="js/eswebapi.all.min.js"></script>
    <script src="js/app.min.js"></script>
</body>

</html>